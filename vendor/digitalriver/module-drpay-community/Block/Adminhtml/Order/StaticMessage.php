<?php
/**
 * Static Message for invoice and credit memo created in Admin
 *
 * @summary Additional message to inform invoices or CMs that are not from DR
 * @author Vignesh Balasubramani <vignesh.balasubramani@gds.ey.com>
 * @category Digitalriver
 * @package  Digitalriver_DrPay
 */
declare(strict_types=1);

namespace Digitalriver\DrPay\Block\Adminhtml\Order;

use Magento\Framework\Exception\NoSuchEntityException;
use Magento\Framework\View\Element\Template;
use Magento\Framework\View\Element\Template\Context;
use Magento\Store\Model\ScopeInterface;

/**
 * Adminhtml invoice or credit memo static message block
 */
class StaticMessage extends Template
{
    const DR_STATIC_MESSAGE = 'dr_settings/config/dr_static_message';
    const DEFAULT_MESSAGE = 'These are not official Digitalriver Payments Documents';

    /**
     * Returns the static message for invoices and CMs that are not generated by Digital River
     *
     * @return mixed|string
     */
    public function getStaticMessage(): string
    {
        try {
            $storeId = $this->_storeManager->getStore()->getId();
            $staticMessage = $this->_scopeConfig->getValue(
                self::DR_STATIC_MESSAGE,
                ScopeInterface::SCOPE_STORE,
                $storeId
            );
        } catch (NoSuchEntityException $exception) {
            $staticMessage = '';
        }
        $staticMessage = ($staticMessage && trim($staticMessage) != "") ? $staticMessage : self::DEFAULT_MESSAGE;
        return $staticMessage;
    }
}
